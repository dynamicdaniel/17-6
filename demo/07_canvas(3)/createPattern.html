<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		body{
			margin:0;
			overflow: hidden;
		}
		#canvas{
			background: url(resource/coordinate.png) no-repeat;
		}
	</style>
</head>
<body>
	
	<!-- <img src="resource/lamp.gif" id="img"> -->
	<canvas id="canvas" width="1900" height="600"></canvas>
	<video src="resource/movie.mp4" id="video" controls="controls"></video>
	<script type="text/javascript">
		var canvas = document.getElementById('canvas');
		/*canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;*/
		var context = canvas.getContext("2d");

		
		
		//context.beginPath();

		/*var img = document.getElementById('img');*/

		// 图片
		/*var img = new Image();
		img.src = "resource/lamp.gif";

		img.onload = function(){
			var pat = context.createPattern( img, "repeat-x");
			context.fillStyle = pat;
			//context.fillRect(0,0,canvas.width,canvas.height);

			context.fillRect(100,0,200,200);
		}
*/
		// canvas

		/*function createBackCanvas(){
			var backCanvas =  document.createElement("canvas");
			backCanvas.width = 100;
			backCanvas.height = 100;
			context.fillRect(0,0,100,100);
			return backCanvas;
		}*/



		/*createBackCanvas(function(backCanvas){
			var pat = context.createPattern( backCanvas ,"repeat" );
			context.fillStyle = pat;
			context.fillRect(0,0,canvas.width,canvas.height);
		});	*/	

//canvas
		/*createBackgroundCanvas(function(canvas2){
			var pat = context.createPattern(canvas2,"repeat");
			context.fillStyle = pat;
			context.fillRect(0,0,800,800);
		})
		//异步解决问题
		function createBackgroundCanvas(func){
			var canvas = document.createElement("canvas");
			canvas.width=500;
			canvas.height=500;
			var context = canvas.getContext("2d");


			var img = new Image();
			img.src = "resource/lamp.gif";
			img.onload= function(){
				var pat = context.createPattern(img,"repeat");
				context.fillStyle = pat;
				context.rect(0,0,400,300);
				context.fill();
				func(canvas);
			}

			//return ;

			// context.fillStyle = "blue";
			// context.rect(0,0,400,300);
			// context.fill();
			
		}
*/

		/*function createBackCanvas(func){
			var backCanvas =  document.createElement("canvas");
			var context = backCanvas.getContext("2d");
			backCanvas.width = 500;
			backCanvas.height = 500;

			var img = new Image();
			img.src = "resource/lamp.gif";

			img.onload = function(){
				var pat = context.createPattern(img, "repeate");
				context.fillStyle = pat;
				context.fillRect(0,0,400,300);
				console.log("text");
				func(backCanvas);
				//return backCanvas;
			}			
			//context.fillRect(0,0,400,300);			
		}*/

		
		
		
		//视频

		var video = document.getElementById('video');

		//video.onloadedmetadata = function(){
		/*video.onplay = function(){			

			function v(){
				context.clearRect(0,0,800,800);
				var pat = context.createPattern(video, "repeat");
				context.fillStyle = pat;
				context.fillRect(0,0,800,800);
				console.log(video);
				if(!video.paused){
					requestAnimationFrame(v);
				}
			
			}
			
			
		}
*/
		var video = document.getElementById('video');


		video.onloadedmetadata = video.onplay= function(){
			

			requestAnimationFrame(v);
			function v(){
				context.clearRect(0,0,800,800);
				var pat = context.createPattern(video,"repeat");

				context.fillStyle = pat;
				context.fillRect(100,100,800,800);
				console.log(video);
				if(!video.paused){
					requestAnimationFrame(v);
				}
				
			}
		}




	</script>
</body>
</html>